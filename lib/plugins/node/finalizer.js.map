{"version":3,"sources":["../../../src/plugins/node/finalizer.js"],"names":["childProcess","require","NodeFinalizer","constructor","builder","dest","getDirectory","run","child","exec","stdout","pipe","process","stderr","on","err","error","exit","code","signal","message","build","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,eAAeC,QAAQ,eAAR,CAArB;;AAEA,MAAMC,aAAN,CAAoB;AAChBC,gBAAYC,OAAZ,EAAqB;AACjB,aAAKA,OAAL,GAAeA,OAAf;AACA,aAAKC,IAAL,GAAY,KAAKD,OAAL,CAAaE,YAAb,CAA0B,aAA1B,CAAZ;AACH;;AAEDC,UAAM;AACF,cAAMC,QAAQR,aAAaS,IAAb,CAAmB,QAAO,KAAKJ,IAAK,WAApC,CAAd;AACAG,cAAME,MAAN,CAAaC,IAAb,CAAkBC,QAAQF,MAA1B;AACAF,cAAMK,MAAN,CAAaF,IAAb,CAAkBC,QAAQC,MAA1B;;AAEAL,cAAMM,EAAN,CAAS,OAAT,EAAkBC,OAAO;AACrB,iBAAKX,OAAL,CAAaY,KAAb,CAAmBD,GAAnB;AACAH,oBAAQK,IAAR,CAAa,CAAb;AACH,SAHD;;AAKAT,cAAMM,EAAN,CAAS,MAAT,EAAiB,CAACI,IAAD,EAAOC,MAAP,KAAkB;AAC/B,iBAAKf,OAAL,CAAagB,OAAb,CAAsB,QAAOF,IAAK,EAAlC;AACH,SAFD;AAIH;;AAEDG,YAAQ;AACJ,aAAKjB,OAAL,CAAagB,OAAb,CAAqB,iBAArB;AACH;;AAxBe;;AA4BpBE,OAAOC,OAAP,GAAiBrB,aAAjB","file":"finalizer.js","sourcesContent":["'use strict'\n\nconst childProcess = require('child_process')\n\nclass NodeFinalizer {\n    constructor(builder) {\n        this.builder = builder\n        this.dest = this.builder.getDirectory('destination')\n    }\n\n    run() {\n        const child = childProcess.exec(`node ${this.dest}/index.js`)\n        child.stdout.pipe(process.stdout)\n        child.stderr.pipe(process.stderr)\n\n        child.on('error', err => {\n            this.builder.error(err)\n            process.exit(1)\n        })\n\n        child.on('exit', (code, signal) => {\n            this.builder.message(`exit ${code}`)\n        })\n\n    }\n\n    build() {\n        this.builder.message('build complete.')\n    }\n\n}\n\nmodule.exports = NodeFinalizer\n"]}