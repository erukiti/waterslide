{"version":3,"sources":["../../../src/plugins/electron/project.js"],"names":["fs","require","path","ElectronProject","constructor","operator","setFinalizer","install","setDirectory","jsInstaller","getInstaller","addDevPackage","setMain","browserGenerator","getGenerator","generate","type","iconGenerator","appJsText","readFileSync","join","__dirname","writeFile","JSON","stringify","gitInstaller","addIgnore","module","exports"],"mappings":"AAAA;;;;AAEA,MAAMA,KAAKC,QAAQ,IAAR,CAAX;AACA,MAAMC,OAAOD,QAAQ,MAAR,CAAb;;AAEA,MAAME,eAAN,CAAsB;AAClBC,gBAAYC,QAAZ,EAAsB;AAClB,aAAKA,QAAL,GAAgBA,QAAhB;AACAA,iBAASC,YAAT,CAAsB,UAAtB;AACH;;AAEKC,WAAN,GAAgB;AAAA;;AAAA;AACZ,kBAAM,MAAKF,QAAL,CAAcG,YAAd,CAA2B,KAA3B,EAAkC,QAAlC,EAA4C,uBAA5C,CAAN;AACA,kBAAM,MAAKH,QAAL,CAAcG,YAAd,CAA2B,aAA3B,EAA0C,IAA1C,EAAgD,kDAAhD,CAAN;AACA,kBAAM,MAAKH,QAAL,CAAcG,YAAd,CAA2B,cAA3B,EAA2C,IAA3C,EAAiD,mDAAjD,CAAN;AACA,kBAAM,MAAKH,QAAL,CAAcG,YAAd,CAA2B,OAA3B,EAAoC,aAApC,EAAmD,iBAAnD,CAAN;AACA,kBAAM,MAAKH,QAAL,CAAcG,YAAd,CAA2B,SAA3B,EAAsC,IAAtC,EAA4C,mBAA5C,CAAN;;AAEA,kBAAMC,cAAc,MAAM,MAAKJ,QAAL,CAAcK,YAAd,CAA2B,IAA3B,CAA1B;AACAD,wBAAYE,aAAZ,CAA0B,UAA1B;AACAF,wBAAYE,aAAZ,CAA0B,kBAA1B;AACAF,wBAAYE,aAAZ,CAA0B,mBAA1B;AACAF,wBAAYE,aAAZ,CAA0B,SAA1B;AACAF,wBAAYG,OAAZ,CAAoB,oBAApB;;AAEA,kBAAMC,mBAAmB,MAAKR,QAAL,CAAcS,YAAd,CAA2B,SAA3B,CAAzB;AACA,kBAAMD,iBAAiBE,QAAjB,CAA0B,uBAA1B,EAAmD,EAACC,MAAM,mBAAP,EAAnD,CAAN;;AAEA,kBAAMC,gBAAgB,MAAKZ,QAAL,CAAcS,YAAd,CAA2B,eAA3B,CAAtB;AACA,kBAAMG,cAAcF,QAAd,CAAuB,aAAvB,CAAN;;AAEA,kBAAMG,YAAYlB,GAAGmB,YAAH,CAAgBjB,KAAKkB,IAAL,CAAUC,SAAV,EAAqB,eAArB,CAAhB,CAAlB;AACA,kBAAM,MAAKhB,QAAL,CAAciB,SAAd,CAAwB,oBAAxB,EAA8CJ,SAA9C,EAAyD,EAACF,MAAM,MAAP,EAAzD,CAAN;AACA,kBAAM,MAAKX,QAAL,CAAciB,SAAd,CAAwB,kBAAxB,EAA6C,GAAEC,KAAKC,SAAL,CAAe,EAAC,QAAQ,gBAAT,EAAf,EAA2C,IAA3C,EAAiD,IAAjD,CAAuD,IAAtG,EAA2G,EAACR,MAAM,MAAP,EAA3G,CAAN;;AAEA,kBAAMS,eAAe,MAAM,MAAKpB,QAAL,CAAcK,YAAd,CAA2B,KAA3B,CAA3B;AACAe,yBAAaC,SAAb,CAAuB,UAAvB;AAzBY;AA0Bf;AAhCiB;;AAmCtBC,OAAOC,OAAP,GAAiBzB,eAAjB","file":"project.js","sourcesContent":["'use strict'\n\nconst fs = require('fs')\nconst path = require('path')\n\nclass ElectronProject {\n    constructor(operator) {\n        this.operator = operator\n        operator.setFinalizer('electron')\n    }\n\n    async install() {\n        await this.operator.setDirectory('src', 'source', 'source code directory')\n        await this.operator.setDirectory('src/browser', null, 'source code directory (Electron Browser Process)')\n        await this.operator.setDirectory('src/renderer', null, 'source code directory (Electron Renderer Process)')\n        await this.operator.setDirectory('build', 'destination', 'build directory')\n        await this.operator.setDirectory('release', null, 'release directory')\n\n        const jsInstaller = await this.operator.getInstaller('js')\n        jsInstaller.addDevPackage('electron')\n        jsInstaller.addDevPackage('electron-connect')\n        jsInstaller.addDevPackage('electron-packager')\n        jsInstaller.addDevPackage('node-7z')\n        jsInstaller.setMain('src/browser/app.js')\n\n        const browserGenerator = this.operator.getGenerator('browser')\n        await browserGenerator.generate('src/renderer/index.js', {type: 'electron-renderer'})\n\n        const iconGenerator = this.operator.getGenerator('electron-icon')\n        await iconGenerator.generate('src/app.png')\n\n        const appJsText = fs.readFileSync(path.join(__dirname, 'sample.app.js'))\n        await this.operator.writeFile('src/browser/app.js', appJsText, {type: 'copy'})\n        await this.operator.writeFile('src/package.json', `${JSON.stringify({'main': 'browser/app.js'}, null, '  ')}\\n`, {type: 'copy'})\n\n        const gitInstaller = await this.operator.getInstaller('git')\n        gitInstaller.addIgnore('release/')\n    }\n}\n\nmodule.exports = ElectronProject\n"]}