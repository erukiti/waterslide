{"version":3,"sources":["../../../src/plugins/browser/generator.js"],"names":["fs","require","path","process","Mustache","BrowserGenerator","operator","name","opts","dirname","prefix","basename","templateHtml","readFileSync","join","__dirname","toString","html","render","sampleJs","writeFile","type","module","exports"],"mappings":"AAAA;;;;;;;;AAEA,IAAMA,KAAKC,QAAQ,IAAR,CAAX;AACA,IAAMC,OAAOD,QAAQ,MAAR,CAAb;AACA,IAAME,UAAUF,QAAQ,SAAR,CAAhB;AACA,IAAMG,WAAWH,QAAQ,UAAR,CAAjB;;IAEMI,gB;AACF,8BAAYC,QAAZ,EAAsB;AAAA;;AAClB,aAAKA,QAAL,GAAgBA,QAAhB;AACH;;;;;kFAEcC,I;oBAAMC,I,uEAAO,E;;;;;;AAClBC,uC,GAAUP,KAAKO,OAAL,CAAaF,IAAb,C;AACVG,sC,GAASR,KAAKS,QAAL,CAAcJ,IAAd,EAAoB,KAApB,C;AAETK,4C,GAAeZ,GAAGa,YAAH,CAAgBX,KAAKY,IAAL,CAAUC,SAAV,EAAqB,iBAArB,CAAhB,EAAyDC,QAAzD,E;AACfC,oC,GAAOb,SAASc,MAAT,CAAgBN,YAAhB,EAA8B,EAACF,cAAD,EAA9B,C;AAEPS,wC,GAAWnB,GAAGa,YAAH,CAAgBX,KAAKY,IAAL,CAAUC,SAAV,EAAqB,WAArB,CAAhB,C;;;AAEjB,qCAAKT,QAAL,CAAcc,SAAd,CAAwBlB,KAAKY,IAAL,CAAUL,OAAV,EAAsBC,MAAtB,WAAxB,EAA8DO,IAA9D,EAAoE,EAACI,MAAM,MAAP,EAApE;AACA,qCAAKf,QAAL,CAAcc,SAAd,CAAwBlB,KAAKY,IAAL,CAAUL,OAAV,EAAsBC,MAAtB,SAAxB,EAA4DS,QAA5D,EAAsEX,IAAtE;;;;;;;;;;;;;;;;;;;;;AAIRc,OAAOC,OAAP,GAAiBlB,gBAAjB","file":"generator.js","sourcesContent":["'use strict'\n\nconst fs = require('fs')\nconst path = require('path')\nconst process = require('process')\nconst Mustache = require('mustache')\n\nclass BrowserGenerator {\n    constructor(operator) {\n        this.operator = operator\n    }\n\n    async generate(name, opts = {}) {\n        const dirname = path.dirname(name)\n        const prefix = path.basename(name, '.js')\n\n        const templateHtml = fs.readFileSync(path.join(__dirname, 'sample.html.mst')).toString()\n        const html = Mustache.render(templateHtml, {prefix})\n\n        const sampleJs = fs.readFileSync(path.join(__dirname, 'sample.js'))\n\n        this.operator.writeFile(path.join(dirname, `${prefix}.html`), html, {type: 'copy'})\n        this.operator.writeFile(path.join(dirname, `${prefix}.js`), sampleJs, opts)\n    }\n}\n\nmodule.exports = BrowserGenerator\n"]}