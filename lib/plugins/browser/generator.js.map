{"version":3,"sources":["../../../src/plugins/browser/generator.js"],"names":["fs","require","path","process","Mustache","BrowserGenerator","constructor","operator","generate","name","opts","dirname","prefix","basename","templateHtml","readFileSync","join","__dirname","toString","html","render","sampleJs","writeFile","type","module","exports"],"mappings":"AAAA;;;;AAEA,MAAMA,KAAKC,QAAQ,IAAR,CAAX;AACA,MAAMC,OAAOD,QAAQ,MAAR,CAAb;AACA,MAAME,UAAUF,QAAQ,SAAR,CAAhB;AACA,MAAMG,WAAWH,QAAQ,UAAR,CAAjB;;AAEA,MAAMI,gBAAN,CAAuB;AACnBC,gBAAYC,QAAZ,EAAsB;AAClB,aAAKA,QAAL,GAAgBA,QAAhB;AACH;;AAEKC,YAAN,CAAeC,IAAf,EAAqBC,OAAO,EAA5B,EAAgC;AAAA;;AAAA;AAC5B,kBAAMC,UAAUT,KAAKS,OAAL,CAAaF,IAAb,CAAhB;AACA,kBAAMG,SAASV,KAAKW,QAAL,CAAcJ,IAAd,EAAoB,KAApB,CAAf;;AAEA,kBAAMK,eAAed,GAAGe,YAAH,CAAgBb,KAAKc,IAAL,CAAUC,SAAV,EAAqB,iBAArB,CAAhB,EAAyDC,QAAzD,EAArB;AACA,kBAAMC,OAAOf,SAASgB,MAAT,CAAgBN,YAAhB,EAA8B,EAACF,MAAD,EAA9B,CAAb;;AAEA,kBAAMS,WAAWrB,GAAGe,YAAH,CAAgBb,KAAKc,IAAL,CAAUC,SAAV,EAAqB,WAArB,CAAhB,CAAjB;;AAEA,kBAAKV,QAAL,CAAce,SAAd,CAAwBpB,KAAKc,IAAL,CAAUL,OAAV,EAAoB,GAAEC,MAAO,OAA7B,CAAxB,EAA8DO,IAA9D,EAAoE,EAACI,MAAM,MAAP,EAApE;AACA,kBAAKhB,QAAL,CAAce,SAAd,CAAwBpB,KAAKc,IAAL,CAAUL,OAAV,EAAoB,GAAEC,MAAO,KAA7B,CAAxB,EAA4DS,QAA5D,EAAsEX,IAAtE;AAV4B;AAW/B;AAhBkB;;AAmBvBc,OAAOC,OAAP,GAAiBpB,gBAAjB","file":"generator.js","sourcesContent":["'use strict'\n\nconst fs = require('fs')\nconst path = require('path')\nconst process = require('process')\nconst Mustache = require('mustache')\n\nclass BrowserGenerator {\n    constructor(operator) {\n        this.operator = operator\n    }\n\n    async generate(name, opts = {}) {\n        const dirname = path.dirname(name)\n        const prefix = path.basename(name, '.js')\n\n        const templateHtml = fs.readFileSync(path.join(__dirname, 'sample.html.mst')).toString()\n        const html = Mustache.render(templateHtml, {prefix})\n\n        const sampleJs = fs.readFileSync(path.join(__dirname, 'sample.js'))\n\n        this.operator.writeFile(path.join(dirname, `${prefix}.html`), html, {type: 'copy'})\n        this.operator.writeFile(path.join(dirname, `${prefix}.js`), sampleJs, opts)\n    }\n}\n\nmodule.exports = BrowserGenerator\n"]}