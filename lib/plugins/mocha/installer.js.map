{"version":3,"sources":["../../../src/plugins/mocha/installer.js"],"names":["fs","require","path","utils","MochaInstaller","operator","mochaOptsText","readFileSync","join","__dirname","testJs","getInstaller","jsInstaller","addDevPackage","addTester","writeFile","checkExistsNpm","checkExists","module","exports"],"mappings":"AAAA;;;;;;;;AAEA,IAAMA,KAAKC,QAAQ,IAAR,CAAX;AACA,IAAMC,OAAOD,QAAQ,MAAR,CAAb;;eAEgBA,QAAQ,kBAAR,C;IAATE,K,YAAAA,K;;IAEDC,c;AACF,4BAAYC,QAAZ,EAAsB;AAAA;;AAClB,aAAKA,QAAL,GAAgBA,QAAhB;AACH;;;;;;;;;;;AAeSC,6C,GAAgBN,GAAGO,YAAH,CAAgBL,KAAKM,IAAL,CAAUC,SAAV,EAAqB,YAArB,CAAhB,C;AAChBC,sC,GAASV,GAAGO,YAAH,CAAgBL,KAAKM,IAAL,CAAUC,SAAV,EAAqB,WAArB,CAAhB,C;;uCAET,KAAKJ,QAAL,CAAcM,YAAd,CAA2B,cAA3B,C;;;;uCAEoB,KAAKN,QAAL,CAAcM,YAAd,CAA2B,IAA3B,C;;;AAApBC,2C;;AACNA,4CAAYC,aAAZ,CAA0B,OAA1B;AACA,qCAAKR,QAAL,CAAcS,SAAd,CAAwB,OAAxB;;;uCAEM,KAAKT,QAAL,CAAcU,SAAd,CAAwB,iBAAxB,EAA2CT,aAA3C,C;;;;uCACA,KAAKD,QAAL,CAAcU,SAAd,CAAwB,cAAxB,EAAwCL,MAAxC,C;;;;;;;;;;;;;;;;;;;oFAvBgBL,Q;;;;;+CAClBF,MAAMa,cAAN,CAAqB,OAArB,C;;;;;;;;uCACSX,SAASY,WAAT,CAAqB,iBAArB,C;;;;;;;;;;;;;;uCACAZ,SAASY,WAAT,CAAqB,qBAArB,C;;;;;;;;;;;;;;uCACAZ,SAASY,WAAT,CAAqB,cAArB,C;;;;;;;;;;;kEAEF,I;;;kEAGJ,IAAI,IAAJ,CAASZ,QAAT,C;;;;;;;;;;;;;;;;;;;;;AAkBfa,OAAOC,OAAP,GAAiBf,cAAjB","file":"installer.js","sourcesContent":["'use strict'\n\nconst fs = require('fs')\nconst path = require('path')\n\nconst {utils} = require('../../waterslide')\n\nclass MochaInstaller {\n    constructor(operator) {\n        this.operator = operator\n    }\n\n    static async getInstaller(operator) {\n        if (utils.checkExistsNpm('mocha')\n            || await operator.checkExists('test/mocha.opts')\n            || await operator.checkExists('test/test-helper.js')\n            || await operator.checkExists('test/test.js')\n        ) {\n            return null\n        }\n\n        return new this(operator)\n    }\n\n    async install() {\n        const mochaOptsText = fs.readFileSync(path.join(__dirname, 'mocha.opts'))\n        const testJs = fs.readFileSync(path.join(__dirname, 'sample.js'))\n\n        await this.operator.getInstaller('power-assert')\n\n        const jsInstaller = await this.operator.getInstaller('js')\n        jsInstaller.addDevPackage('mocha')\n        this.operator.addTester('mocha')\n\n        await this.operator.writeFile('test/mocha.opts', mochaOptsText)\n        await this.operator.writeFile('test/test.js', testJs)\n    }\n}\n\nmodule.exports = MochaInstaller\n"]}